pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- pong
-- by rbroken

function _init()
	speed=1.5
	max_y=50
	min_y=5
	max_x=124
	min_x=0
	
	b_init_x=64
	b_init_y=28
	
	player={
		y=b_init_y,
		x=0,
		s=1
	}
	ball={
		x=b_init_x,
		y=b_init_y,
		s=2,
		h=-1,
		v=0
	}
	bot={
		y=b_init_y,
		x=120,
		s=1
	}
	points={
		p=0,
		b=0
	}
end

function _update()
	player_movement()
	ball_movement()
	bot_movement()
end

function _draw()
	cls()
	map()
	spr(player.s,player.x,player.y)
	spr(bot.s,bot.x,bot.y)
	spr(ball.s,ball.x,ball.y)
	show_board()
end

function reset_pos()
		ball.x=b_init_x
		ball.y=b_init_y
		ball.v=0
		player.y=b_init_y
		bot.y=b_init_y
end

function player_movement()
	if(btn(⬆️)) then
		player.y-=speed
		if(player.y<min_y) player.y=min_y
	end
	
	if(btn(⬇️)) then
		player.y+=speed
		if(player.y>max_y) player.y=max_y
	end
end

function bot_movement()
	if(bot.y>ball.y) then
		bot.y-=(speed/1.5)
		if(bot.y<min_y) bot.y=min_y
	end
	if(bot.y<ball.y) then
		bot.y+=(speed/1.5)
		if(bot.y>max_y) bot.y=max_y
	end
end

function ball_movement()
	ball.x+=ball.h
	ball.y+=ball.v
	
	--bateu no limite
	if(ball.y>=61) then
		ball.v=-1
	end
	if(ball.y<=1) then
		ball.v=1
	end
	
	--acertou jogadores
	collision()
	
	--player fez ponto
	if(ball.x>=max_x) then
		reset_pos()
		points.p+=1
		ball.h=-1
	end
	
	--bot fez ponto
	if(ball.x<=min_x) then
		reset_pos()
		points.b+=1
		ball.h=1
	end
end

function collision()
	p_border=player.x+4
	b_border=bot.x+1
	
	p_top_min=player.y-2
	p_top_max=player.y+1
	p_bot_min=player.y+4
	p_bot_max=player.y+9
	--atingiu player
	if(ball.x==p_border and (ball.y>=p_top_min and ball.y<=p_bot_max)) then
		sfx(0)
		ball.h=1
		--atingiu topo
		if(ball.y>=p_top_min and ball.y<=p_top_max) ball.v=-1
	
		--atingiu baixo
		if(ball.y>=p_bot_min and ball.y<=p_bot_max) ball.v=1
	end
	
	b_top_min=bot.y-2
	b_top_max=bot.y+1
	b_bot_min=bot.y+4
	b_bot_max=bot.y+9
	--atingiu bot
	if(ball.x==b_border and (ball.y>=b_top_min and ball.y<=b_bot_max)) then
		sfx(1)
		ball.h=-1
		--atingiu topo
		if(ball.y>=b_top_min and ball.y<=b_top_max) ball.v=-1
	
		--atingiu baixo
		if(ball.y>=b_bot_min and ball.y<=b_bot_max) ball.v=1
	end
end

function show_board()
	print("player:",0,72)
	print(points.p,30,72)
	
	print("bot:",0,80)
	print(points.b,30,80)
end
__gfx__
00000000000770007700000066666666666666666666666666666666000000000000000000000000000000000000000000000000000000000000000000000000
00000000000770007700000060000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000770000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000770000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000770000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000770000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000770000000000060000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000770000000000060000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000066666666666666666666666666666666000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0304040404040404060404040404040500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1300000000000000160000000000001500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1300000000000000160000000000001500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1300000000000000160000000000001500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1300000000000000160000000000001500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1300000000000000160000000000001500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1300000000000000160000000000001500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2324242424242424262424242424242500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000000001605016050160501605016050160502e0502e0502e0502e0402e0402e0402e0202e0002e0000400004000040000400003000030000300003000020000200002000020000200002000020000300004000
000100002e0502e0502e0502e0502e0502e0501605016050160401603016010160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00040000337501f75037750387503e7503b7501b750147501375011751117503f7503c750107501075010750107501975011750197501275013750147503e75017750217501a7501d7501f750217502775026750
000400001a6001d600206002360024600256002460023600206001f6001f600206002360025600276002960029600286002660025600236002360024600266002a6002c6002e6002e6002d6002b6002860026600
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0020000018a5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 42404344

